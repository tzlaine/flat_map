\section{Revisions}

\subsection{Changes from R7}

\begin{itemize}
  \item Wording fixes based on LWG review in December 2020.
  \item Change \tcode{o} to tcode{off} in wording for reading ease.
  \item add compare include to headers
  \item added \tcode{uses_allocator} struct
  \item clarified \tcode{flat_multimap} emplace behavior compared to {flat_map}
  \item Change references to stable names.
  \item Editorial change Alloc to Allocator.
  \item Replace friend operators with \tcode{operator==()} and \tcode{operator<=>()} to match C++20 containers.
  \item Update swap to use \tcode{ranges::swap}.
  \item Replace past tense 'is exited' with 'exits' via exception wording.
  \item \tcode{extract} Change: \tcode{*this} is emptied, even if...  -> from Effects to Postcondition.
  \item Remove the specification of \tcode{operator=(initializer_list<key_type>)} from prior LWG review.
  \item Update \tcode{std::upper_bound} to \tcode{ranges::upper_bound}.
  \item Add heterogenous erase overloads following \href{https://wg21.link/P2077}{P2077}.
  \item Add .overview subheadings to keep ISO structure reviewers happy.
  \item Change 'preceding constructors' -> corresponding non-allocator constructors.
  \item Add container erasure \tcode{erase_if} function following P1209 from C++20.
  \item Add remaining heterogeneous operations, following \href{https://wg21.link/P2363}{P2363}.
  \item Add range formatting interfaces following \href{https://wg21.link/P2286}{P2286}.
  \item Add ranges::to() ctors and deduction guides following \href{https://wg21.link/P1206}{P1206}.
  \item A variety of changes to rebase on \href{https://wg21.link/N4910}{N4910}.
  \item Full change diffs available at \href{https://github.com/tzlaine/flat_map/commits/master}{github}.
\end{itemize}

\subsection{Changes from R6}

\begin{itemize}
  \item Numerous wording fixes based on early reviews by Daniel Kr{\"u}gler and Arthur O'Dwyer.
  \item Numerous formatting corrections.
  \item Numerous wording fixes based on LWG review in Kona.
\end{itemize}

\subsection{Changes from R5}

\begin{itemize}
  \item Address comments from San Diego meeting LWG small group review.
  \item Replace \textit{Requires:} elements with new-style elements.
  \item Remove \tcode{merge()} member functions, based on LEWG guidance.
  \item Numerous other corrections.
\end{itemize}

\subsection{Changes from R4}

\begin{itemize}
  \item Address comments from Batavia meeting review.
\end{itemize}

\subsection{Changes from R3}

\begin{itemize}
  \item Remove previous sections.
  \item Retarget to LWG exclusively.
  \item Wording.
\end{itemize}

\subsection{Changes from R2}

\begin{itemize}
  \item \tcode{value_type} is now \tcode{pair<const Key, T>}.
  \item \tcode{ordered_unique_sequence_tag} is now \tcode{sorted_unique_t}, and
    is applied uniformly such that those overloads that have it are assumed to
    receive sorted input, and those that do not have it are not.
  \item The overloads taking two allocators now take only one.
  \item \tcode{extract()} now returns a custom type instead of a \tcode{pair}.
  \item Add \tcode{contains()} (tracking \tcode{map}).
\end{itemize}

\subsection{Changes from R1}

\begin{itemize}
  \item Add deduction guides.
  \item Change \tcode{value_type} and reference types to be proxies, and remove
    \tcode{\{const_\},pointer}.
  \item Split storage of keys and values.
  \item Pass several constructor parameters by value to reduce the number of overloads.
  \item Remove the benchmark charts.
\end{itemize}

\subsection{Changes from R0}

\begin{itemize}
  \item Drop the requirement on container contiguity; sequence container will
    do.
  \item Remove \tcode{capacity()}, \tcode{reserve()}, and \tcode{shrik_to_fit()}
    from container requirements and from \tcode{flat_map} API.
  \item Drop redundant implementation variants from charts.
  \item Drop erase operation charts.
  \item Use more recent compilers for comparisons.
  \item Add analysis of separated key and value storage.
\end{itemize}

\section{Wording}

Add \tcode{<flat_map>} to [tab:headers.cpp].

In [assoc.format]:

For each of map, multimap, unordered_map,\removed{ and}
unordered_multimap\added{, flat_map, and flat_multimap}, the library provides
the following formatter specialization where map-type is the name of the
template:
